[gd_scene load_steps=39 format=3 uid="uid://b6xhp64emqkwx"]

[ext_resource type="Script" path="res://controllers/player_controller.gd" id="1_4w8h7"]
[ext_resource type="PackedScene" uid="uid://dhi2kxhketyav" path="res://characters/glitch_samurai.tscn" id="1_i3e4p"]
[ext_resource type="Script" path="res://controllers/states/idle_state.gd" id="3_5luov"]
[ext_resource type="Script" path="res://controllers/player_state_machine.gd" id="3_w71w5"]
[ext_resource type="Script" path="res://controllers/states/run_state.gd" id="4_8c444"]
[ext_resource type="Script" path="res://controllers/air_state.gd" id="6_sphbd"]
[ext_resource type="Script" path="res://controllers/attack_state.gd" id="7_ojbny"]

[sub_resource type="Animation" id="Animation_tmyob"]
resource_name = "Glitch Idle"
length = 0.6
loop_mode = 1
step = 0.05
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("GlitchSamurai/AnimatedSprite2D:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.05, 0.1, 0.15, 0.2, 0.25, 0.3, 0.35, 0.4, 0.45, 0.5),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1),
"update": 1,
"values": [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("GlitchSamurai/AnimatedSprite2D:animation")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [&"Glitch Idle"]
}

[sub_resource type="Animation" id="Animation_evy42"]
resource_name = "Glitch Run"
length = 0.6
loop_mode = 1
step = 0.05
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("GlitchSamurai/AnimatedSprite2D:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.05, 0.1, 0.15, 0.2, 0.25, 0.3, 0.35, 0.4, 0.45, 0.5, 0.55),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1),
"update": 1,
"values": [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("GlitchSamurai/AnimatedSprite2D:animation")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [&"Glitch Run"]
}

[sub_resource type="Animation" id="Animation_ihnkr"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("GlitchSamurai/AnimatedSprite2D:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [0]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("GlitchSamurai/AnimatedSprite2D:animation")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [&"Glitch Run"]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("GlitchSamurai/CollisionShape2D:position")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector2(0.5, -9.5)]
}
tracks/3/type = "value"
tracks/3/imported = false
tracks/3/enabled = true
tracks/3/path = NodePath("GlitchSamurai/AnimatedSprite2D:flip_h")
tracks/3/interp = 1
tracks/3/loop_wrap = true
tracks/3/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [false]
}

[sub_resource type="Animation" id="Animation_gws6b"]
resource_name = "Glitch Fall"
length = 0.5
loop_mode = 1
step = 0.1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("GlitchSamurai/AnimatedSprite2D:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.1, 0.2, 0.3),
"transitions": PackedFloat32Array(1, 1, 1, 1),
"update": 1,
"values": [0, 1, 2, 3]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("GlitchSamurai/AnimatedSprite2D:animation")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [&"Glitch Fall"]
}

[sub_resource type="Animation" id="Animation_sfv4s"]
resource_name = "Glitch Jump"
length = 0.5
loop_mode = 1
step = 0.1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("GlitchSamurai/AnimatedSprite2D:animation")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [&"Glitch Jump"]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("GlitchSamurai/AnimatedSprite2D:frame")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 0.1, 0.2, 0.3),
"transitions": PackedFloat32Array(1, 1, 1, 1),
"update": 1,
"values": [0, 1, 2, 3]
}

[sub_resource type="Animation" id="Animation_h4e0f"]
resource_name = "Glitch Attack 1"
length = 0.28
step = 0.05
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("GlitchSamurai/AnimatedSprite2D:animation")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [&"Glitch Attack 1"]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("GlitchSamurai/AnimatedSprite2D:frame")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 0.05, 0.1, 0.15, 0.2, 0.25),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1, 1),
"update": 1,
"values": [1, 2, 3, 4, 5, 6]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("GlitchSamurai/CollisionShape2D:position")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0, 0.1, 0.25),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 0,
"values": [Vector2(0.5, -9.5), Vector2(17, -10), Vector2(0.5, -9.5)]
}

[sub_resource type="Animation" id="Animation_j0y6d"]
resource_name = "Glitch Attack 2"
length = 0.24
step = 0.05
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("GlitchSamurai/AnimatedSprite2D:animation")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [&"Glitch Attack 2"]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("GlitchSamurai/AnimatedSprite2D:frame")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 0.05, 0.1, 0.15, 0.2),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1),
"update": 1,
"values": [0, 1, 2, 3, 4]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("GlitchSamurai/CollisionShape2D:position")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0, 0.05),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Vector2(0.5, -9.5), Vector2(22, -10)]
}

[sub_resource type="Animation" id="Animation_sxgav"]
resource_name = "Glitch Attack 3"
length = 0.3
step = 0.05
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("GlitchSamurai/AnimatedSprite2D:animation")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [&"Glitch Attack 3"]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("GlitchSamurai/AnimatedSprite2D:frame")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 0.05, 0.1, 0.15, 0.2, 0.25),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1, 1),
"update": 1,
"values": [0, 1, 2, 3, 4, 5]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("GlitchSamurai/AnimatedSprite2D:flip_h")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0, 0.3),
"transitions": PackedFloat32Array(1, 1),
"update": 1,
"values": [true, false]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_k0255"]
_data = {
"Glitch Attack 1": SubResource("Animation_h4e0f"),
"Glitch Attack 2": SubResource("Animation_j0y6d"),
"Glitch Attack 3": SubResource("Animation_sxgav"),
"Glitch Fall": SubResource("Animation_gws6b"),
"Glitch Idle": SubResource("Animation_tmyob"),
"Glitch Jump": SubResource("Animation_sfv4s"),
"Glitch Run": SubResource("Animation_evy42"),
"RESET": SubResource("Animation_ihnkr")
}

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_m0tjm"]
animation = &"Glitch Fall"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_y2dk3"]
animation = &"Glitch Jump"

[sub_resource type="AnimationNodeBlendSpace1D" id="AnimationNodeBlendSpace1D_ufbgd"]
blend_point_0/node = SubResource("AnimationNodeAnimation_m0tjm")
blend_point_0/pos = -1.0
blend_point_1/node = SubResource("AnimationNodeAnimation_y2dk3")
blend_point_1/pos = 1.0
blend_mode = 1

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_jhtyw"]
animation = &"Glitch Attack 1"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_xbsfy"]
animation = &"Glitch Attack 2"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_4wow6"]
animation = &"Glitch Attack 3"

[sub_resource type="AnimationNodeBlendSpace1D" id="AnimationNodeBlendSpace1D_smf6y"]
blend_point_0/node = SubResource("AnimationNodeAnimation_jhtyw")
blend_point_0/pos = 0.0
blend_point_1/node = SubResource("AnimationNodeAnimation_xbsfy")
blend_point_1/pos = 1.0
blend_point_2/node = SubResource("AnimationNodeAnimation_4wow6")
blend_point_2/pos = 2.0
min_space = 0.0
max_space = 3.0
snap = 1.0
blend_mode = 1

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_2qolq"]
animation = &"Glitch Idle"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_44pnm"]
animation = &"Glitch Run"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_dodwu"]
advance_mode = 2
advance_condition = &"running"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_yi4ib"]
advance_mode = 2
advance_condition = &"idle"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_elv5c"]
switch_mode = 2
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_oyt8w"]
advance_mode = 2
advance_condition = &"jumping"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_ihl66"]
advance_mode = 2
advance_condition = &"idle"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_odl3e"]
advance_mode = 2
advance_condition = &"jumping"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_n704i"]
advance_mode = 2
advance_condition = &"running"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_0ylcr"]
advance_mode = 2
advance_condition = &"attacking"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_cc3xi"]
advance_mode = 2
advance_condition = &"idle"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_xxe1e"]
advance_mode = 2
advance_condition = &"running"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_whu6p"]
advance_mode = 2
advance_condition = &"attacking"

[sub_resource type="AnimationNodeStateMachine" id="AnimationNodeStateMachine_e3np3"]
states/Air/node = SubResource("AnimationNodeBlendSpace1D_ufbgd")
states/Air/position = Vector2(499.347, 180.082)
states/Attack/node = SubResource("AnimationNodeBlendSpace1D_smf6y")
states/Attack/position = Vector2(520.903, -49.2518)
states/End/position = Vector2(866, 53.9772)
"states/Glitch Idle/node" = SubResource("AnimationNodeAnimation_2qolq")
"states/Glitch Idle/position" = Vector2(382.903, 53.9115)
"states/Glitch Run/node" = SubResource("AnimationNodeAnimation_44pnm")
"states/Glitch Run/position" = Vector2(650.903, 54.4053)
states/Start/position = Vector2(180.667, 92.01)
transitions = ["Glitch Idle", "Glitch Run", SubResource("AnimationNodeStateMachineTransition_dodwu"), "Glitch Run", "Glitch Idle", SubResource("AnimationNodeStateMachineTransition_yi4ib"), "Start", "Glitch Idle", SubResource("AnimationNodeStateMachineTransition_elv5c"), "Glitch Idle", "Air", SubResource("AnimationNodeStateMachineTransition_oyt8w"), "Air", "Glitch Idle", SubResource("AnimationNodeStateMachineTransition_ihl66"), "Glitch Run", "Air", SubResource("AnimationNodeStateMachineTransition_odl3e"), "Air", "Glitch Run", SubResource("AnimationNodeStateMachineTransition_n704i"), "Glitch Idle", "Attack", SubResource("AnimationNodeStateMachineTransition_0ylcr"), "Attack", "Glitch Idle", SubResource("AnimationNodeStateMachineTransition_cc3xi"), "Attack", "Glitch Run", SubResource("AnimationNodeStateMachineTransition_xxe1e"), "Glitch Run", "Attack", SubResource("AnimationNodeStateMachineTransition_whu6p")]
graph_offset = Vector2(75.5695, -102.585)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_x3akr"]
size = Vector2(246, 30)

[node name="PlayerController" type="Node2D"]
script = ExtResource("1_4w8h7")

[node name="GlitchSamurai" parent="." instance=ExtResource("1_i3e4p")]
unique_name_in_owner = true
position = Vector2(50, 120)

[node name="AnimatedSprite2D" parent="GlitchSamurai" index="0"]
animation = &"Glitch Run"
frame = 0
frame_progress = 0.0

[node name="AnimationPlayer" type="AnimationPlayer" parent="."]
libraries = {
"": SubResource("AnimationLibrary_k0255")
}

[node name="AnimationTree" type="AnimationTree" parent="."]
tree_root = SubResource("AnimationNodeStateMachine_e3np3")
anim_player = NodePath("../AnimationPlayer")
parameters/conditions/attacking = false
parameters/conditions/idle = false
parameters/conditions/jumping = false
parameters/conditions/running = false
parameters/Air/blend_position = 0.0
parameters/Attack/blend_position = 0.0968436

[node name="LimboHSM" type="LimboHSM" parent="." node_paths=PackedStringArray("animation_tree", "character")]
unique_name_in_owner = true
script = ExtResource("3_w71w5")
animation_tree = NodePath("../AnimationTree")
character = NodePath("../GlitchSamurai")

[node name="Idle" type="LimboState" parent="LimboHSM" node_paths=PackedStringArray("air_state", "animation_tree", "state_machine", "character")]
unique_name_in_owner = true
script = ExtResource("3_5luov")
air_state = NodePath("../Air")
animation_tree = NodePath("../../AnimationTree")
state_machine = NodePath("..")
state_enum = 0
character = NodePath("../../GlitchSamurai")

[node name="Run" type="LimboState" parent="LimboHSM" node_paths=PackedStringArray("animation_tree", "state_machine", "character")]
unique_name_in_owner = true
script = ExtResource("4_8c444")
animation_tree = NodePath("../../AnimationTree")
state_machine = NodePath("..")
state_enum = 1
character = NodePath("../../GlitchSamurai")

[node name="Air" type="LimboState" parent="LimboHSM" node_paths=PackedStringArray("animation_tree", "state_machine", "character")]
unique_name_in_owner = true
script = ExtResource("6_sphbd")
animation_tree = NodePath("../../AnimationTree")
state_machine = NodePath("..")
character = NodePath("../../GlitchSamurai")

[node name="Attack" type="LimboState" parent="LimboHSM" node_paths=PackedStringArray("animation_tree", "state_machine", "character")]
unique_name_in_owner = true
script = ExtResource("7_ojbny")
animation_tree = NodePath("../../AnimationTree")
state_machine = NodePath("..")
character = NodePath("../../GlitchSamurai")

[node name="StaticBody2D" type="StaticBody2D" parent="."]
position = Vector2(9, 61)

[node name="CollisionShape2D" type="CollisionShape2D" parent="StaticBody2D"]
position = Vector2(114, 82)
shape = SubResource("RectangleShape2D_x3akr")

[editable path="GlitchSamurai"]
